{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
  <div class="max-w-2xl mx-auto mt-10 bg-white shadow-lg rounded-2xl p-8">
    <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">ğŸï¸ Create Your Racer Profile</h2>
    
    <form method="POST" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}

      <!-- Tel -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ“± Phone Number</label>
        {{ form.tel|add_class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" }}
      </div>

      <!-- Carte Biometrique -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸªª Carte Biometrique</label>
        {{ form.carte_biometrique|add_class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" }}
      </div>

      <!-- Profile Picture -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ–¼ï¸ Profile Picture</label>
        {{ form.pfp|add_class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" }}
        <img id="previewImg" class="mt-3 hidden w-32 h-32 rounded-full border-2 border-gray-300 object-cover shadow" />
      </div>

      <!-- Bio -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ“ Short Bio</label>
        {{ form.bio|add_class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none" }}
      </div>

      <!-- Date of Birth -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ‚ Date of Birth</label>
        {{ form.date_birth|add_class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" }}
      </div>

      <!-- Speciality -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">âš¡ Speciality</label>
        {{ form.speciality|add_class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" }}
      </div>

      <!-- Submit -->
      <div class="pt-4">
        <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-xl shadow-md hover:bg-blue-700 transition transform hover:scale-[1.02]">
          ğŸš€ Save Profile
        </button>
      </div>
    </form>
  </div>

  <script>
    // Profile picture preview
    document.addEventListener("DOMContentLoaded", function() {
      const input = document.querySelector("input[name='pfp']");
      const preview = document.getElementById("previewImg");

      if (input) {
        input.addEventListener("change", function(e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
              preview.src = event.target.result;
              preview.classList.remove("hidden");
            }
            reader.readAsDataURL(file);
          }
        });
      }
    });
  </script>
{% endblock content %}
